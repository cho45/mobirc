[% IF channel_buffer.item(canon_channel) and channel_buffer.item(canon_channel).size %]
[%- IF recent_mode %]
[% USE JavaScript %]
Mobirc.callbackChannel([
[% FOR line IN channel_recent.item(canon_channel).reverse() %]
'[% render_line( line ) | js | html %]'[% UNLESS loop.last %],[% END %]
[% END %]
]);
[% ELSE %]
[% USE JavaScript %]
Mobirc.callbackChannel([
[% FOR line IN channel_buffer.item(canon_channel).reverse() %]
'[% render_line( line ) | js | html %]'[% UNLESS loop.last %],[% END %]
[% END %]
]);
[% END %]
[% END %]
